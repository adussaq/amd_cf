/*!
 * @overview amd_cf.
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/adussaq/amd_cf/gh-pages/LICENSE
 * @version   2.0.0
 * @Compressed with: https://closure-compiler.appspot.com/home
 */


var amd_cf=function(){var f,d,l,m,h,n,k,p,q;h={};k={},

webWorkerPackageURL = "amd_ww-2.0.0.min.js";
curveFittingWorkerURL = "amd_cf_worker-1.2.1.min.js"

f=amd_core;d=f.isArray;f.require({async:[webWorkerPackageURL],callback:function(a){a[webWorkerPackageURL].loaded&&window.amd_ww?(p=window.amd_ww.startWorkers({filename:curveFittingWorkerURL}),h.getEquation=l):a.promise.then(function(a){console.error(a);throw"amd_ww is required for this curve fitting package, download at: https://github.com/adussaq/amd_ww/";})}});m=function(a,c){var b=[!0,void 0];a&&"object"===typeof a||(b[1]="Equation object at "+
c+" is not an object, see: https://github.com/adussaq/amd_cf/blob/gh-pages/README.md#equation_obj for more information.",b[0]=!1);a.hasOwnProperty("func")&&"function"===typeof a.func||(b[1]="Equation object at "+c+' does not have a proper ".func" property, see: https://github.com/adussaq/amd_cf/blob/gh-pages/README.md#equation_obj for more information.',b[0]=!1);a.hasOwnProperty("setInitial")&&"function"===typeof a.setInitial||(b[1]="Equation object at "+c+' does not have a proper ".setInitial" property, see: https://github.com/adussaq/amd_cf/blob/gh-pages/README.md#equation_obj for more information.',
b[0]=!1);b[0]||(b[1]=Error(b[1]));return b};n=function(a,c){a.equation=c;return new Promise(function(b,c){a.hasOwnProperty("x_values")?a.y_values?d(a.x_values)&&d(a.y_values)?a.x_values.length!==a.y_values.length?c(Error("The length of x_values and y_values must be the same")):d(a.x_values[0])?b(a):c(Error("data.x_values must be an array of arrays, each array represents the X vector for each point.")):c(Error("Both x_values and y_values must be arrays")):c(Error("Must inlcude y_values as an property on data")):
c(Error("Must inlcude x_values as an property on data"))})};l=function(a){return k[a]?k[a]:q(a)};q=function(a){var c,b,d,f;c=[];b=Object.create(Promise);d=function(a){eq = eval("eq = "+a);return eq};(function(){var c,e;c=function(b,c){return function(r){var e,g;e=d(r);g=m(e,a);g[0]?(f=r,b(e)):(console.error(g[1]),c(g[1]))}};e=function(b){return function(c){b(Error("Failed to get: "+a+" statusText: "+c.statusText+" status: "+c.status))}};b.equation=new Promise(function(b,d){$.ajax({dataType:"text",url:a,
success:c(b,d),error:e(d)})})})();b.fit=function(a){var e;e=b.equation.then(function(){return n(a,f)}).then(function(a){return p.submit(a)}).then(function(a){var b;b=a[1];b.data=a[0];b.data.equation=d(f);return b});c.push(e["catch"](function(){}));return e};b.race=function(a){return a&&0<a.length?Promise.all(a):Promise.all(c)};b.all=function(a){return a&&0<a.length?Promise.all(a):Promise.all(c)};b.url=a;b.then=function(a,c){return b.equation.then(a,c)};b["catch"]=function(a){return b.equation["catch"](a)};
return b};return h}();